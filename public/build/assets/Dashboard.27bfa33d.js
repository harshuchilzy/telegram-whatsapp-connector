import{s as D,g as r,o as n,c,a as d,u as h,w as m,F as u,p as x,H as E,b as e,r as M,i as T,v as j,l as k,t as B}from"./app.7804b47c.js";import{_ as I}from"./AuthenticatedLayout.297affe8.js";import{i as N}from"./vue-qrcode.esm.99e07c33.js";import"./ApplicationLogo.aa24a0ee.js";const C=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Telegram ",-1),W={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},O={class:"py-12"},Q={class:"ml-0 sm:px-6 lg:px-8 grid grid-cols-2 gap-5"},R={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},V={class:"p-6 bg-white border-b border-gray-200"},J={class:"flex-1 p:2 sm:p-6 justify-between flex flex-col h-auto"},P=e("div",{class:"flex sm:items-center justify-between py-3 border-b-2 border-gray-200"},[e("div",{class:"relative flex items-center space-x-4"},[e("div",{class:"relative"},[e("span",{class:"absolute text-green-500 right-0 bottom-0"},[e("svg",{width:"20",height:"20"},[e("circle",{cx:"8",cy:"8",r:"8",fill:"currentColor"})])]),e("img",{src:"https://images.unsplash.com/photo-1549078642-b2ba4bda0cdb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=144&h=144",alt:"",class:"w-10 sm:w-16 h-10 sm:h-16 rounded-full"})]),e("div",{class:"flex flex-col leading-tight"},[e("div",{class:"text-2xl mt-1 flex items-center"},[e("span",{class:"text-gray-700 mr-3"},"Trading Messages")]),e("span",{class:"text-lg text-gray-600"},"DayZ Solutions")])])],-1),$={class:"chat-message"},L={class:"flex items-start"},Z={class:"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-2 items-start"},z={class:"px-4 py-2 rounded-lg inline-block rounded-bl-none bg-gray-300 text-gray-600"},A=e("img",{src:"https://images.unsplash.com/photo-1549078642-b2ba4bda0cdb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=144&h=144",alt:"My profile",class:"w-6 h-6 rounded-full order-1"},null,-1),G=k(" Whatsapp QR "),ee={__name:"Dashboard",props:{user:Object,appId:String,appHash:String},setup(f){const o=f,{TelegramClient:g}=telegram,{StringSession:v}=telegram.sessions;D({type:"telegram",session:""});const _=parseInt(o.appId),b=o.appHash;var w=new v(o.user.telegram_session);const l=r();l.value=new g(w,_,b,{connectionRetries:5}),o.user.telegram_session!==void 0&&l.value.connect();async function y(){l.value.addEventHandler(S,new g.events.NewMessage({}))}y();const p=r([]);async function S(t){console.log("message event");const s=t.message;if(t.isPrivate){const a=await s.getSender();await x.post(route("api.incoming-telegram"),{message:s.text,sender:a.first_name}),p.value.push({id:s.id,text:s.text});const H=await x.post("http://localhost:3001/forward-msg",{to:"717765766",message:s.text});console.log(H),await l.value.sendMessage(a,{message:`hi your id is ${s.senderId}`})}}const i=r("empty");return Echo.channel("whatsapp").listen("WhatsappEvent",t=>{i.value=t.qr,console.log(t.qr),console.log("Event Triggering")}),(t,s)=>(n(),c(u,null,[d(h(E),{title:"Dashboard"}),d(I,null,{header:m(()=>[C]),default:m(()=>[e("div",W,[e("div",q,[e("div",F,[e("div",O,[e("div",Q,[e("div",R,[e("div",V,[e("div",J,[P,(n(!0),c(u,null,M(p.value,a=>(n(),c("div",{key:a.id,class:"flex flex-col space-y-4 p-3 overflow-y-auto scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-blue-lighter scrollbar-w-2 scrolling-touch"},[e("div",$,[e("div",L,[e("div",Z,[e("div",null,[e("span",z,B(a.text),1)])]),A])])]))),128))])])]),e("div",null,[G,T(d(h(N),{value:i.value,options:{width:200}},null,8,["value"]),[[j,i.value!=="empty"]])])])])])])])]),_:1})],64))}};export{ee as default};
